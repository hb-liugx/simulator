var peaxy = peaxy || {};peaxy.ResourceConfig = kendo.Class.extend({	_opt:{parent:$('#example'),			pageSize:20,			onChange:function(){}		},	page:1,	pageNumber:1,	resConfigEdit:null,	serverId:'',	width:964,	data:[],	selectedIpData:{},	beaconData:[],	editId:[],	init: function(options) {		this.setOptions(options);		this.initLocalResource();	},	//	// call by xiaoshuang, resource config page	//	initLocalResource:function(){		if(this._opt.parent){								var parent = this._opt.parent;			//it will be also used by view log page.it must be first element.			parent.append('<div id="resconfig_slidein"></div>');			resconfigDiv = $('<div id="resconfig_div"></div>');			parent.append(resconfigDiv);			resconfigDiv.width(parent.width());			resconfigDiv.height(parent.height());						var topDiv = $('<div id="resconfig_topdiv"></div>');			resconfigDiv.append(topDiv);			topDiv.append(this.getTopPanel("resconfig_toppanel",this.width,this.getTopPanelHtml()));			topDiv.append(this.getFilterHtml(this.width));			topDiv.append(this.getGridHeadHtml(this.width));						resconfigDiv.find('[id="checkall"]').off().bind('click',this.onCheckAll);						this.discover();			//this.initData(this.getResourceConfigData());		}	},	//	//	get data by API function discover	//	discover:function(){		var that = this;		this._opt.parent.find('[id="config_waiting"]').addClass('p-spinner');		peaxy.Communication.getScript('js/peaxy.bootstrapinterface.js',function(){			peaxy.Communication.getScript('js/peaxy.switchbutton.js',function(){				peaxy.BootstrapInterface.discover(function(discoverInfo){					var ids = that.getIdList(discoverInfo);					peaxy.BootstrapInterface.getBeacons(ids,function(beacons){						that.initData(discoverInfo,beacons);					});				});			});		});	},	initData:function(d,b){		this.data = d;		this.beaconData = b;		this._opt.parent.find('[id="availableserver_num"]').text(this.data.length);		var resconfigDiv = this._opt.parent.find('[id="resconfig_div"]');		if(this.data && 0<this.data.length){			resconfigDiv.find('#exampleshare-right').remove();			resconfigDiv.find('[id="resconfig_t_data"]').empty();			this._opt.parent.find('[id="resconfig_filter"]').off().bind('blur',this.onFilterBlur);			this.setPageNumber(this.data.length);			resconfigDiv.append(this.getDataPanel());			this.updateHeight();			//this.bindDataToTemplate(this.data,this._opt.parent.width(),this.width);			//var that =this;			//peaxy.Communication.getScript('js/peaxy.switchbutton.js',function(){			this.bindDataToTemplate(this.data,this._opt.parent.width(),this.width);			//});			//parent.append(this.getBottomPanel("resconfig_bottonpanel",1024,this.getBottonPanelHtml(width)));			this.setTopPanel(false);		}else{			resconfigDiv.find('#exampleshare-right').remove();			resconfigDiv.append(this.getNoServerHtml());			this.setTopPanel(true);		}			},	//	// call by xiaoshuang, AssignIpAddress page	//	initAssignIpAddress:function(){		this._opt.parent.find('[id="resconfig_div"]').hide();		if(this.resConfigEdit){			this.resConfigEdit.hide();		}		if(0 < this._opt.parent.find('#resconfig_ipassign_div').length){			this._opt.parent.find('#resconfig_ipassign_div').show();		}else{			var assignIpDiv = $('<div id="resconfig_ipassign_div"></div>');			this._opt.parent.append(assignIpDiv);			assignIpDiv.append(this.getTopPanel("ipassignment_toppanel",this.width,this.getIpAssignmentsTopPanelHtml()));			assignIpDiv.append(this.getIpAssignmentsHtml(this.width));			this._opt.parent.find('[name="ip_required"]').text(this.getIpAssignmentsIpCount(this.getSelectedIdList()));			this.bindIpAssignmentsEvents(assignIpDiv);		}	},	bindIpAssignmentsEvents:function(parent){		parent.find('[id="resconfig_assignip_iphelp"]').off().bind('click',this.onIpAssignmentsHelpClick);		parent.find('[id="resconfig_assignip_ip"]').off().bind('keyup',this.onIpAssignmentsKeyup);	},	onIpAssignmentsHelpClick:function(e){		// if(peaxy.ResourceConfig.prototype.checkIPAddresses()){						// peaxy.ResourceConfig.prototype.initLocalResourceInstall();			// this._opt.onChange(true);			// peaxy.ResourceConfig.prototype.setIpInfo();		// }		// e.stopPropagation();	},	onIpAssignmentsKeyup:function(e){		if(peaxy.ResourceConfig.prototype.checkIPAddresses($(this).val())){			peaxy.ResourceConfig.prototype.setOnChangeHandler(true);		}else{			peaxy.ResourceConfig.prototype.setOnChangeHandler(false);		}		e.stopPropagation();	},	checkIPAddresses:function(){		var exp=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;		var expAll=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.\*$/;		var expRange=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])-(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;		var isCorrect=true,ipaddr = this._opt.parent.find('[id="resconfig_assignip_ip"]').val();		var prev,next,index;		if(ipaddr){			this._opt.parent.find('[id="resconfig_assignip_ipcheckresultdiv"]').remove();						this._opt.parent.find('[id="resconfig_assignip_ipinputcheckdiv"]').append(this.getIPCheckResultHtml());			var ips = ipaddr.split(',');			for(var i=0;i<ips.length;i++){				ipaddr = ips[i];				if(ipaddr.match(exp) || ipaddr.match(expRange) || ipaddr.match(expAll)){					index = ipaddr.lastIndexOf('-');					if(-1 < index){						prev = ipaddr.substring(ipaddr.lastIndexOf('.')+1,index);						next = ipaddr.substring(index+1);						if(prev == next){							isCorrect = false;							this._opt.parent.find('[name="ipassign_invalid"]').text('Invalid IP address format, please enter valid IP address.');							this._opt.parent.find('[id="resconfig_assignip_ipwalidtable"]').append(ipaddr+'<br>');						}					}				}else{					isCorrect = false;					this._opt.parent.find('[name="ipassign_invalid"]').text('Invalid IP address format, please enter valid IP address.');					this._opt.parent.find('[id="resconfig_assignip_ipwalidtable"]').append(ipaddr+'<br>');				}			}			//if(this.getSelectedIpCount() != ips.length){isCorrect = false;}		}else{			isCorrect = false;		}		return isCorrect;	},	getSelectedIpCount:function(){		var c=0;		for(var id in this.selectedIpData){			c++;		}		return c;	},	getIpAssignmentsIpCount:function(idList){		var id,count=0;		for(var i=0;i<idList.length;i++){			id = idList[i];			for(var j=0;j<this.data.length;j++){				if(id == this.data[j].id){					count += this.data[j].ipCount;				}								}		}			return count;	},	getSelectedIdList:function(){		var l=[];		for(var id in this.selectedIpData){			l.push(id);		}		return l;	},	checkIdIsSelected:function(id){		for(var key in this.selectedIpData){			if(key == id){return true;}		}		return false;	},	getIdList:function(data){		var l=[];		for(var i=0;i<data.length;i++){			l.push(data[i].id);		}		return l;	},	getBeaconById:function(id){		for(var i=0;i<this.beaconData.length;i++){			if(id == this.beaconData[i].id){				return this.beaconData[i].beacon;			}		}		return false;	},	setBeaconById:function(id,beacon){		for(var i=0;i<this.beaconData.length;i++){			if(id == this.beaconData[i].id){				this.beaconData[i].beacon = beacon;			}		}	},	setEditId:function(id){		this.editId.push(id);	},	checkIdIsEdit:function(id){		for(var i=0;i<this.editId.length;i++){			if(this.editId[i] == id){return true;}		}		return false;	},	getIpInfoData:function(){		var ipInfo = {};		ipInfo['idList'] = this.getSelectedIdList();		ipInfo['ipRangeList'] = this._opt.parent.find('[id="resconfig_assignip_ip"]').val().split(',');		//peaxy.BootstrapInterface.setIpInfo(ipInfo,function(IpAssignments){		var ipidlist = [],list= this.getSelectedIdList(),listIp=this._opt.parent.find('[id="resconfig_assignip_ip"]').val().split(',');		for(var i=0;i<list.length;i++){			var listIdIp ={};			listIdIp['id'] = list[i];			listIdIp['ip'] = listIp[i];			ipidlist.push(listIdIp);		}			var IpAssignments ={ipList:ipidlist,								additionalNeeded:1,								inUse:[],								available:[]			};			return IpAssignments;		//});	},	//	// call setIpInfo of API, callback handler to useful by xiaoshuang.	//	setIpInfo:function(handler){		var ipInfo = {},that=this;		ipInfo['idList'] = this.getSelectedIdList();		ipInfo['ipRangeList'] = this._opt.parent.find('[id="resconfig_assignip_ip"]').val().split(',');		peaxy.BootstrapInterface.setIpInfo(ipInfo,function(IpAssignments){			if(0==IpAssignments.additionalNeeded && 0==IpAssignments.inUse.length){				handler(IpAssignments);			}else{				that._opt.parent.find('[id="resconfig_assignip_ipcheckresultdiv"]').remove();							that._opt.parent.find('[id="resconfig_assignip_ipinputcheckdiv"]').append(that.getIPCheckResultHtml());				if(0 < IpAssignments.additionalNeeded){					that._opt.parent.find('[name="ipassign_invalidcount"]').text('Please add '+IpAssignments.additionalNeeded+' IP addresses.');				}				if(0 < IpAssignments.inUse.length){					that._opt.parent.find('[name="ipassign_invalid"]').text('These IP addresses is used, please enter new IP addresses to replace them.');					for(var i=0;i<IpAssignments.inUse.length;i++){						that._opt.parent.find('[id="resconfig_assignip_ipwalidtable"]').append(IpAssignments.inUse[i]+'<br>');					}				}			}		});		// var ipAssignments = this.getIpInfoData();		// this.initLocalResourceInstall(ipAssignments);	},	backToAssignIpAddress:function(){		this._opt.parent.find('[id="resconfig_install_div"]').hide();		this._opt.parent.find('[id="resconfig_ipassign_div"]').show();	},	//	// call startOsInstall of API	//	startOsInstall:function(){		peaxy.BootstrapInterface.startOsInstall(function(msgs){			if(0 < msgs.length){				peaxy.ResourceConfig.prototype.setOnChangeHandler(false);				peaxy.ResourceConfig.Install.prototype.setInstallErrorMessage(msgs);			}else{				peaxy.ResourceConfig.Install.prototype.setStatus('os');				peaxy.Communication.getScript('js/peaxy.progressbar.js',function(){					peaxy.ResourceConfig.Install.prototype.startProgress();				});				}		});	},	//	// call cancelOsInstalls of API	//	// cancelOsInstalls:function(){		// peaxy.BootstrapInterface.cancelOsInstalls(function(){					// });	// },	cancelInstalls:function(){		peaxy.ResourceConfig.Install.prototype.cancelInstalls();	},	setOptions:function(option){		$.extend(this._opt,option);	},	startVmInstall:function(){		peaxy.ResourceConfig.Install.prototype.setStatus('vm');		peaxy.ResourceConfig.Install.prototype.startProgress();	},	//	// call cancelVmInstalls of API	//	// cancelVmInstalls:function(){		// peaxy.BootstrapInterface.cancelVmInstalls(function(){				// });	// },	startHfInstall:function(fileSize,nsRepFactor){		peaxy.BootstrapInterface.initHf(peaxy.ResourceConfig.Install.prototype.getSelectedIdList(),fileSize,nsRepFactor,function(){			peaxy.ResourceConfig.Install.prototype.setStatus('hf');			peaxy.ResourceConfig.Install.prototype.startProgress();		});	},	//	//	//	backToResourceConfig:function(){		this._opt.parent.find('[id="resconfig_ipassign_div"]').hide();		this._opt.parent.find('[id="resconfig_div"]').show();	},	initLocalResourceInstall:function(ipAssignments){		this._opt.parent.find('[id="resconfig_ipassign_div"]').hide();		var opt={parent:this._opt.parent,				 pageSize:this._opt.pageSize,				 ipAssignments:ipAssignments,				 //ipAssignments:this.getIpInfoData(),				 selectedNames:this.selectedIpData				 };		var install = new peaxy.ResourceConfig.Install(opt);	},	getResourceConfigData:function(){		return [{id:1,hostname:'Engineering_1',manufacturer:'hp',product:'Proliant DL140 G3',serialNumber:'USE736N6DL',memory:'17.3GB',		diskList:[{name:'sda',size:9852.1},{name:'sda',size:9852.1}],interfaceList:[{interfaceName:'1',speed:10,isActive:true,isBonded:true},{interfaceName:'2',speed:10,isActive:true,isBonded:true}]},				{id:2,hostname:'engineering_2',manufacturer:'hp',product:'Proliant DL140 G3',serialNumber:'USE736N6DL',memory:'17.3GB',				diskList:[{name:'sda',size:9852.1},{name:'sda',size:9852.1}],interfaceList:[{interfaceName:'2',speed:11,isActive:false,isBonded:false},{interfaceName:'3',speed:11,isActive:false,isBonded:false}]},				{id:3,hostname:'Engineering_3',manufacturer:'hp',product:'Proliant DL140 G3',serialNumber:'USE736N6DL',memory:'17.3GB',				diskList:[{name:'sda',size:9852.1},{name:'sda',size:9852.1}],interfaceList:[{interfaceName:'3',speed:12,isActive:true,isBonded:false}]},				{id:4,hostname:'engineering_1',manufacturer:'hp',product:'Proliant DL140 G3',serialNumber:'USE736N6DL',memory:'17.3GB',				diskList:[{name:'sda',size:9852.1},{name:'sda',size:9852.1}],interfaceList:[{interfaceName:'4',speed:13,isActive:false,isBonded:true}]},				{id:5,hostname:'Engineering_1',manufacturer:'hp',product:'Proliant DL140 G3',serialNumber:'USE736N6DL',memory:'17.3GB',				diskList:[{name:'sda',size:9852.1},{name:'sda',size:9852.1}],interfaceList:[{interfaceName:'5',speed:14,isActive:true,isBonded:true}]},				{id:6,hostname:'engineering_1',manufacturer:'hp',product:'Proliant DL140 G3',serialNumber:'USE736N6DL',memory:'17.3GB',				diskList:[{name:'sda',size:9852.1},{name:'sda',size:9852.1}]},				{id:7,hostname:'Engineering_1',manufacturer:'hp',product:'Proliant DL140 G3',serialNumber:'USE736N6DL',memory:'17.3GB',				diskList:[{name:'sda',size:9852.1},{name:'sda',size:9852.1}]},				{id:8,hostname:'Engineering_1',manufacturer:'hp',product:'Proliant DL140 G3',serialNumber:'USE736N6DL',memory:'17.3GB',				diskList:[{name:'sda',size:9852.1},{name:'sda',size:9852.1}]},				{id:9,hostname:'Engineering_1',manufacturer:'hp',product:'Proliant DL140 G3',serialNumber:'USE736N6DL',memory:'17.3GB',				diskList:[{name:'sda',size:9852.1},{name:'sda',size:9852.1}]},				{id:10,hostname:'Engineering_1',manufacturer:'hp',product:'Proliant DL140 G3',serialNumber:'USE736N6DL',memory:'17.3GB',				diskList:[{name:'sda',size:9852.1},{name:'sda',size:9852.1}]},				{id:11,hostname:'Engineering_1',manufacturer:'hp',product:'Proliant DL140 G3',serialNumber:'USE736N6DL',memory:'17.3GB',				diskList:[{name:'sda',size:9852.1},{name:'sda',size:9852.1}]},				{id:12,hostname:'Engineering_1',manufacturer:'hp',product:'Proliant DL140 G3',serialNumber:'USE736N6DL',memory:'17.3GB',				diskList:[{name:'sda',size:9852.1},{name:'sda',size:9852.1}]},				{id:13,hostname:'Engineering_1',manufacturer:'hp',product:'Proliant DL140 G3',serialNumber:'USE736N6DL',memory:'17.3GB',				diskList:[{name:'sda',size:9852.1},{name:'sda',size:9852.1}]},				{id:14,hostname:'Engineering_1',manufacturer:'hp',product:'Proliant DL140 G3',serialNumber:'USE736N6DL',memory:'17.3GB',				diskList:[{name:'sda',size:9852.1},{name:'sda',size:9852.1}]},				{id:15,hostname:'Engineering_1',manufacturer:'hp',product:'Proliant DL140 G3',serialNumber:'USE736N6DL',memory:'17.3GB',				diskList:[{name:'sda',size:9852.1},{name:'sda',size:9852.1}]},				{id:16,hostname:'Engineering_1',manufacturer:'hp',product:'Proliant DL140 G3',serialNumber:'USE736N6DL',memory:'17.3GB',				diskList:[{name:'sda',size:9852.1},{name:'sda',size:9852.1}]},				{id:17,hostname:'Engineering_1',manufacturer:'hp',product:'Proliant DL140 G3',serialNumber:'USE736N6DL',memory:'17.3GB',				diskList:[{name:'sda',size:9852.1},{name:'sda',size:9852.1}]},				{id:18,hostname:'Engineering_1',manufacturer:'hp',product:'Proliant DL140 G3',serialNumber:'USE736N6DL',memory:'17.3GB',				diskList:[{name:'sda',size:9852.1},{name:'sda',size:9852.1}]},				{id:19,hostname:'Engineering_1',manufacturer:'hp',product:'Proliant DL140 G3',serialNumber:'USE736N6DL',memory:'17.3GB',				diskList:[{name:'sda',size:9852.1},{name:'sda',size:9852.1}]},				{id:20,hostname:'Engineering_1',manufacturer:'hp',product:'Proliant DL140 G3',serialNumber:'USE736N6DL',memory:'17.3GB',				diskList:[{name:'sda',size:9852.1},{name:'sda',size:9852.1}]},				{id:21,hostname:'Engineering_1',manufacturer:'hp',product:'Proliant DL140 G3',serialNumber:'USE736N6DL',memory:'17.3GB',				diskList:[{name:'sda',size:9852.1},{name:'sda',size:9852.1}]},				{id:22,hostname:'Engineering_1',manufacturer:'hp',product:'Proliant DL140 G3',serialNumber:'USE736N6DL',memory:'17.3GB',				diskList:[{name:'sda',size:9852.1},{name:'sda',size:9852.1}]},				{id:23,hostname:'Engineering_1',manufacturer:'hp',product:'Proliant DL140 G3',serialNumber:'USE736N6DL',memory:'17.3GB',				diskList:[{name:'sda',size:9852.1},{name:'sda',size:9852.1}]},				{id:24,hostname:'Engineering_1',manufacturer:'hp',product:'Proliant DL140 G3',serialNumber:'USE736N6DL',memory:'17.3GB',				diskList:[{name:'sda',size:9852.1},{name:'sda',size:9852.1}]},				{id:25,hostname:'Engineering_1',manufacturer:'hp',product:'Proliant DL140 G3',serialNumber:'USE736N6DL',memory:'17.3GB',				diskList:[{name:'sda',size:9852.1},{name:'sda',size:9852.1}]},				{id:26,hostname:'Engineering_1',manufacturer:'hp',product:'Proliant DL140 G3',serialNumber:'USE736N6DL',memory:'17.3GB',				diskList:[{name:'sda',size:9852.1},{name:'sda',size:9852.1}]},				{id:27,hostname:'Engineering_1',manufacturer:'hp',product:'Proliant DL140 G3',serialNumber:'USE736N6DL',memory:'17.3GB',				diskList:[{name:'sda',size:9852.1},{name:'sda',size:9852.1}]},				{id:28,hostname:'Engineering_1',manufacturer:'hp',product:'Proliant DL140 G3',serialNumber:'USE736N6DL',memory:'17.3GB',				diskList:[{name:'sda',size:9852.1},{name:'sda',size:9852.1}]},				{id:29,hostname:'Engineering_1',manufacturer:'hp',product:'Proliant DL140 G3',serialNumber:'USE736N6DL',memory:'17.3GB',				diskList:[{name:'sda',size:9852.1},{name:'sda',size:9852.1}]},				{id:30,hostname:'Engineering_1',manufacturer:'hp',product:'Proliant DL140 G3',serialNumber:'USE736N6DL',memory:'17.3GB',				diskList:[{name:'sda',size:9852.1},{name:'sda',size:9852.1}]}				];	},	setOnChangeHandler:function(change){		this._opt.onChange(change);	},	onFilterBlur:function(e){		peaxy.ResourceConfig.prototype.resourceConfigFilter($(this).val());		e.stopPropagation();	},	resourceConfigFilter:function(t){		if(t){			var name,d=[],exp= new RegExp('^'+t);			for(var i=0;i<this.data.length;i++){				name = this.data[i].hostname;				if(exp.test(name)){					d.push(this.data[i]);				}			}			peaxy.ResourceConfig.prototype.bindFilterData(d,this._opt.parent.width(),peaxy.ResourceConfig.prototype.width);		}else{			this._opt.parent.find('[id="resconfig_t_data"]').empty();			peaxy.ResourceConfig.prototype.bindDataToTemplate(this.data,this._opt.parent.width(),peaxy.ResourceConfig.prototype.width);		}	},	setPageNumber: function(dataLength){		peaxy.ResourceConfig.prototype.pageNumber = Math.ceil(dataLength / this._opt.pageSize);	},	getEndPageNumber: function(dataLength){		if (this.page == this.pageNumber){			return dataLength;		}else {			return this.page * this._opt.pageSize;		}	},	setTopPanel: function(noData){		//_opt.parent.find('[id="config_waiting_des"]').remove();		var that = this;		this._opt.parent.find('[id="config_waiting"]').removeClass('p-spinner');		this._opt.parent.find('[id="resconfig_filter"]').prop('disabled',noData);		this._opt.parent.find('[id="checkall"]').prop('disabled',noData)		if(noData){			this._opt.parent.find('[id="config_waiting_des"]').text('Unable to find and servers');			this._opt.parent.find('[id="seeserevers"]').css('display','inline');			this._opt.parent.find('[id="searchagain"]').off().bind('click',function(e){that.discover();e.stopPropagation();});			this._opt.parent.find('[id="learnmore"]').off().bind('click',function(){that.onLearnMoreClick();});			this._opt.parent.find('[id="seeserevers"]').off().bind('click',function(e){that.discover();e.stopPropagation();});		}else{						this._opt.parent.find('[id="config_waiting_des"]').text('Search complete');			this._opt.parent.find('[id="seeserevers"]').text('');			this._opt.parent.find('[id="resconfig_gridhead"]').removeClass('gray-14');			this._opt.parent.find('[id="resconfig_gridhead"]').addClass('black-14');		}					},	onLearnMoreClick:function(e){		e.stopPropagation();	},	getTopPanel:function(id,width,html){		var hr = '<HR class="p-hr-l"/>';		var tPanel = $('<div style="margin:auto;"></div>');		tPanel.attr('id',id);		tPanel.css('width',width);		tPanel.append(html);		tPanel.append(hr);		return tPanel;	},	setHeadStyle: function(){		_opt.parent.find('[id="checkall"]').attr('disabled',true);	},	getDataPanel: function(){		return '<div id="resconfig_d_data" style="overflow-y:auto;overflow-x:hidden;position:relative;z-index:1;">\		<table id="resconfig_t_data" cellspacing="0" cellspadding="0" style="border-top:solid 1px #A1A9AC;"></table></div>';	},	bindDataToTemplate: function(data,pWidth,width){		var tb = this._opt.parent.find('[id="resconfig_t_data"]');		var r,type,d,name,num=this.getEndPageNumber(data.length),p=(peaxy.ResourceConfig.prototype.page-1) * this._opt.pageSize;		var temp=this.getDataTemplateHtml(pWidth,width);		var sd,sdData,sdr,beacon,checked,editId;		var that=this;		for(var i=p;i<num;i++){			r = $(temp);			tb.append(r);			d = data[i];			beacon = this.getBeaconById(d.id);			checked = this.checkIdIsSelected(d.id);			if(this.checkIdIsEdit(d.id)){				r.find('[name="resconfig_default"]').text('custom');			}			r.find('[name]').each(function(){				name = $(this).attr('name');				if(name=='edit'){					if(!d.hasBonded){$(this).addClass('red-12');}					$(this).off().bind('click',function(e){						var resetObj = $(this).parent().parent().parent().parent().parent().parent().parent();						var serverId = $(this).parent().parent().parent().find('[name="id"]').text();						var serverName = $(this).parent().parent().parent().find('[name="hostname"]').text();						peaxy.Communication.getScript('js/peaxy.slidein.js',function(){							that.startEditSlideIn(serverId,serverName,resetObj);							resetObj.addClass('p-blue-repeater');						});						e.stopPropagation();					});				}else if(name=='beacon'){					//var b =$(this);						$(this).kendoPeaxySwitch();						$(this).prop('checked',beacon);						$(this).off().bind('click',function(e){that.onBeaconClick();e.stopPropagation();});					//$(this).bind('click',peaxy.ResourceConfig.prototype.onBeaconClick);				}else if(name=='check'){					$(this).prop('checked',checked);				}else{					$(this).text(d[name]);					$(this).parent().css({'overflow':'hidden',							'white-space':'nowrap',							'text-overflow':'ellipsis'						   });				}				//$(this).bind('click',Grid.prototype.onCellClick);			});			if(d['diskList']){				sdData = d['diskList'];				sd = r.find('[name="sd"]');				if(sdData){					sd.append(',disk-list=');					for(var j=0;j<sdData.length;j++){						sdr = sdData[j];						sd.append(sdr['name']+':'+sdr['size']+'GB ');					}				}			}			this.bindCheckBoxEvents(r);		}		this._opt.parent.find('[id="resconfig_d_data"]').off().bind('scroll',this.onDataDivScroll);	},	bindFilterData:function(data,pWidth,width){		var tb = this._opt.parent.find('[id="resconfig_t_data"]');		tb.empty();		var r,type,d,name,num=data.length;		var temp=this.getDataTemplateHtml(pWidth,width);		var sd,sdData,sdr,beacon,checked,editId;		var that=this;		for(var i=0;i<num;i++){			r = $(temp);			tb.append(r);			d = data[i];			beacon = this.getBeaconById(d.id);			checked = this.checkIdIsSelected(d.id);			if(this.checkIdIsEdit(d.id)){				r.find('[name="resconfig_default"]').text('custom');			}			r.find('[name]').each(function(){				name = $(this).attr('name');				if(name=='edit'){					if(!d.hasBonded){$(this).addClass('red-12');}					$(this).off().bind('click',function(e){						var resetObj = $(this).parent().parent().parent().parent().parent().parent().parent();						var serverId = $(this).parent().parent().parent().find('[name="id"]').text();						var serverName = $(this).parent().parent().parent().find('[name="hostname"]').text();						peaxy.Communication.getScript('js/peaxy.slidein.js',function(){							that.startEditSlideIn(serverId,serverName,resetObj);							resetObj.addClass('p-blue-repeater');						});						e.stopPropagation();					});				}else if(name=='beacon'){					//var b =$(this);						$(this).kendoPeaxySwitch();						$(this).prop('checked',beacon);						$(this).off().bind('click',function(e){that.onBeaconClick();e.stopPropagation();});					//$(this).bind('click',peaxy.ResourceConfig.prototype.onBeaconClick);				}else if(name=='check'){					$(this).prop('checked',checked);				}else{					$(this).text(d[name]);					$(this).parent().css({'overflow':'hidden',							'white-space':'nowrap',							'text-overflow':'ellipsis'						   });				}				//$(this).bind('click',Grid.prototype.onCellClick);			});			if(d['diskList']){				sdData = d['diskList'];				sd = r.find('[name="sd"]');				if(sdData){					sd.append(',disk-list=');					for(var j=0;j<sdData.length;j++){						sdr = sdData[j];						sd.append(sdr['name']+':'+sdr['size']+'GB ');					}				}			}			this.bindCheckBoxEvents(r);		}		this._opt.parent.find('[id="resconfig_d_data"]').off().bind('scroll',this.onDataDivScroll);	},	bindScrollData:function(){		if(this.page < this.pageNumber){			this.page++;			this.bindDataToTemplate(this.data,this._opt.parent.width(),this.width);		}	},	onDataDivScroll:function(e){		if($(this).get(0).scrollHeight <= ($(this).get(0).scrollTop+$(this).height())){			peaxy.ResourceConfig.prototype.bindScrollData();		}		if(0 == $(this).get(0).scrollTop){			$(this).removeClass('gridScrollShadow');		}else{			$(this).addClass('gridScrollShadow');		}		e.stopPropagation();	},	onEditClick:function(e){		var resetObj = $(this).parent().parent().parent().parent().parent().parent().parent();		var serverId = $(this).parent().parent().parent().find('[name="id"]').text();		var serverName = $(this).parent().parent().parent().find('[name="hostname"]').text();		peaxy.Communication.getScript('js/peaxy.slidein.js',function(){			peaxy.ResourceConfig.prototype.startEditSlideIn(serverId,serverName,resetObj);			resetObj.addClass('p-blue-repeater');		});		//console.dir(e);		e.stopPropagation();	},	startEditSlideIn:function(serverId,serverName,resetObj){		var opt = {parent:this._opt.parent,				   container:this._opt.parent.find('[id="resconfig_slidein"]'),				   serverId:serverId,				   serverName:serverName,				   resetObj:resetObj,				   data:this.getInterfaceListById(serverId),				   handler:this.resetInterfaceListHandler					};		if(this.resConfigEdit){			if(serverId != this.serverId){				this.resConfigEdit.resetResourceConfigBackground();				this.resConfigEdit.clearHtml();				this.resConfigEdit = new peaxy.ResourceConfig.Edit(opt);			}else{				this.resConfigEdit.setOption(opt);				this.resConfigEdit.bindDataToTemplate(this.getInterfaceListById(serverId));				this.resConfigEdit.setSaveButtonStyle('cta-button',true);			}		}else{			this.resConfigEdit = new peaxy.ResourceConfig.Edit(opt);		}		this.serverId = serverId;		this.resConfigEdit.show();	},	resetInterfaceListHandler:function(id,list,b){		peaxy.ResourceConfig.prototype.resetInterfaceList(id,list,b);		peaxy.ResourceConfig.prototype.setEditId(id);	},	resetInterfaceList:function(id,list,b){		var c=0;		for(var i=0;i<this.data.length;i++){			if(id == this.data[i].id){				this.data[i].interfaceList = list;				this.data[i].hasBonded = b;			}		}	},	getInterfaceListById:function(id){		var d;		for(var i=0;i<this.data.length;i++){			d = this.data[i];			if(id == d.id){				return d.interfaceList;			}		}			},	onBeaconClick:function(e){		var id = $(this).parent().parent().parent().parent().find('[name="id"]').text();		peaxy.BootstrapInterface.setBeacon(id,this.checked,function(){			peaxy.ResourceConfig.prototype.setBeaconById(id,this.checked);		});		// peaxy.ResourceConfig.prototype.initAssignIpAddress();		//peaxy.ResourceConfig.prototype.initLocalResourceIstall();		e.stopPropagation();	},	setBeaconData:function(checked,id){		if(checked){			this.beaconData[id] = checked;		}else{			delete this.beaconData[id];		}			},	bindCheckBoxEvents: function(row){		row.find('input[name][type="checkbox"]').each(function(){			$(this).off().bind('click',peaxy.ResourceConfig.prototype.onCellClick);		});	},	onCellClick: function(e){		if($(this).attr('name') == 'check'){			var parent = $(this).parent().parent();			peaxy.ResourceConfig.prototype.checkboxSelect(this.checked,parent);		}		e.stopPropagation();	},	checkboxSelect:function(checked,parent){		var num = this._opt.parent.find('[id="resconfig_t_data"] tr[name=template]').length;		this.updateSelectedIpData(parent,checked);		var checkNum = this.getSelectedIpCount();		if(checkNum == num){			this._opt.parent.find('[id="checkall"]').prop('checked',true);		}else{			this._opt.parent.find('[id="checkall"]').prop('checked',false);		}		//xiaoshuang onchange disable		if(0 < checkNum){			this._opt.onChange(true);		}else{			this._opt.onChange(false);		}	},	onCheckAll:function(e){		peaxy.ResourceConfig.prototype.checkAll(this.name,this.checked);		e.stopPropagation();	},	checkAll:function(name,checked){		var tr,num=this._opt.parent.find('[id="resconfig_t_data"] tr[name=template]').length;		for(var i=0;i<num;i++){			tr = this._opt.parent.find('[id="resconfig_t_data"] tr[name=template]:eq('+i+')');			tr.find('input[name='+name+']').prop('checked',checked);			this.updateSelectedIpData(tr,checked);		}		if(checked){			this._opt.onChange(true);		}else{			this._opt.onChange(false);		}	},	updateSelectedIpData:function(row,isSet){		if(isSet){			this.selectedIpData[row.find('[name="id"]').text()] = row.find('[name="hostname"]').text();		}else{			delete this.selectedIpData[row.find('[name="id"]').text()];		}	},	notSeeingServersClick: function(){	},	getBottonPanel: function(id,width,html){		var bPanel = $('<div style="box-shadow:0 -5px 3px #A1A9AC; background-color:#DADDDE;"></div>');		bPanel.attr('id',id);		bPanel.css('width',width);		bPanel.css('height',66);		bPanel.append(html);		return bPanel;	},	getTopPanelHtml: function() {		return '<div style="padding-top:20px;"><font class="gray-18">ADD RESOURCES: </font><font class="normal-18">SELECT RESOURCES</font></div>\						<div style="padding-top:5px;margin-bottom:10px;">\							<div id="config_waiting" style="float:left;"></div>\							<font id="config_waiting_des" class="lightblack-14">Searching for all available physical servers.</font>\							<u id="seeserevers" class="underline-14" style="cursor:pointer;display:none;">Search For Servers Again</u>\						</div>';	},	getFilterHtml: function(width){		return '<table cellspacing="0" cellpadding="0" style="width:'+width+'px; margin:auto;margin-top:15px;"><tr>\						<td align="left">\							<font class="gray-14">SELECT PHYSICAL SERVERS</font>\							<font id="availableserver_num" style="margin-left:20px;" class="normal-14">0</font>\							<font class="normal-14"> Servers Found</font>\						</td>\						<td align="right"><input id="resconfig_filter" type="text" class="p-input" placeholder="Enter an install ID to filter by that item" \						style="width:284px;height:24px;font-size:14px;background:transparent;"/></td>\					</tr></table>'	},	getGridHeadHtml: function(width){		return '<div id="resconfig_gridhead" style="margin:auto;margin-top:15px;margin-bottom:5px;" class="gray-14">\				<table cellspacing="0" cellpadding="0" style="width:'+width+'px;margin:auto;">\					<tr>\						<td width="40px"><input id="checkall" type="checkbox" name="check" disabled="true" style="margin-left:1px;"/><label></label></td>\						<td width="170px"><font>PHYSICAL SERVER NAME</font></td>\						<td><font>DESCRIPTION</font></td>\						<td width="151px"><font>ETHERNET BONDING</font></td>\						<td width="69px"><font>BEACON</font></td>\					</tr>\				</table>\			</div>';	},	getNoServerHtml: function(){		return '<div id="exampleshare-right" style="margin:auto;padding-top:80px;width:600px;height:100px;">\				<font class="normal-22">We were unable to find any servers in discovery mode.</font><br>\				<div style="margin:auto; margin-top:10px;width:500px;">\				<font class="lightblack-14">Make sure servers are booting from the Peaxy Server Software disk image</font><br>\				<font class="lightblack-14">and are assigned the ID you are looking for.</font>\				</div>\				<div style="margin:auto; margin-top:10px; width:300px;">\				<font class="lightblack-14" >\					<u id="learnmore"class="underline-14" style="cursor:pointer">Learn More</u> or \					<u id="searchagain"class="underline-14" style="cursor:pointer">Search For Servers Again</u>\				</font>\				</div>\			</div>';	},	getDataTemplateHtml: function(pWidth,width){		return '<tr name="template"><td><div style="width:'+pWidth+'px;border-bottom:solid 1px #A1A9AC;">\				<table cellspacing="0" cellpadding="0" style="width:'+width+'px;margin:auto;margin-top:5px;margin-bottom:5px;">\					<tr>\						<td name="id" style="display:none;"></td>\						<td width="40px"><input type="checkbox" name="check" style="margin-left:0px;"/><label></label></td>\						<td class="black-12" width="170px" name="hostname"></td>\						<td class="black-12">\							manufacturer=<font name="manufacturer"></font>,product=<font name="product"></font>,\							serial-number=<font name="serialNumber"></font>,<br>\							memory=<font name="memory"></font>GB<font name="sd"></font>\						</td>\						<td width="150px">\							<div name="resconfig_default" style="width:60px;float:left;" class="gray-12">default</div>\							<div name="edit" style="float:left;" class="underline-12"><u name="edit" style="cursor:pointer;">Edit</u></div>\						</td>\						<td width="70px"><input name="beacon" type="checkbox"/></td>\					</tr>\				</table>\			</div></td></tr>';	},	getBottomPanelHtml: function(width){		return '<div style="margin:auto;width:'+width+'px;padding:3px;">\					<table width="100%" cellspacing="0" cellpadding="0">\						<tr>\							<td width="320px">\								<font class="lightblack-14">ASSIGN IP ADDRESSES</font>\								<font class="normal-14" style="margin-left:20px;">0</font>\								<font class="normal-14">Required</font><br>\								<font class="gray-12">Enter the IP Addresses that will be assigned</font><br>\								<font class="gray-12">to the resources to be configured</font>\							</td>\							<td align="left"><textarea rows="2" style="resize:none;width:240px;" placeholder="Enter address"></textarea></td>\							<td width="255px">\								<font class="gray-12">Enter address ranges (xxx.xxx.xx.xx-xx) or</font><br>\								<font class="gray-12">Individual addresses Separate ranges and</font><br>\								<font class="gray-12">individual addresses with commas</font>\							</td>\						</tr>\					</table>\				</div>';	},	getIpAssignmentsTopPanelHtml: function() {		return '<div style="padding-top:20px;margin-bottom:20px;">\		<font class="gray-18">ADD RESOURCES: </font><font class="normal-18">ASSIGN IP ADDRESSES</font></div>';	},	getIpAssignmentsHtml:function(width){		return '<div id="resconfig_assignip_ipinputcheckdiv" style="width:'+width+'px;margin:auto;">\					<table width="100%" style="margin-top:20px;" cellspacing="0" cellpadding="0">\						<tr><td>\							<font>IP ADDRESSES (<font name="ip_required">48</font> Required)</font>\							<span id="resconfig_assignip_iphelp" class="help" data-help-url="" style="float:right;cursor:pointer;width:20px;"></span><br>\						<td>\						</tr>\					</table>\					<font class="normal-14">Please enter the IP addresses that will be assigned to the resources to be configured.</font><br>\					<div id="resconfig_assignip_ipinputdiv" style="margin-top:20px;">\						<textarea id="resconfig_assignip_ip" style="width:940px;resize:none;border: 1px solid rgb(162,170,173);" rows="10" placeholder="Enter IP Address"></textarea><br>\						<font class="gray-12">Enter address ranges (XXX.XXX.XX.XX-XX) or individual addresses. Separate ranges and individual Addresses with commas.</font><br>\					</div>\			</div>';	},	getIPCheckResultHtml:function(){		return '<div id="resconfig_assignip_ipcheckresultdiv" style="margin-top:20px;">\						<div>\							<font name="ipassign_invalidcount" style="color:red;"></font><br>\							<font name="ipassign_invalid" style="color:red;"></font><br>\							<div style="margin-top:10px;height:300px;width:120px;overflow-y:auto;overflow-x:hidden;margin-bottom:10px;color:red;">\								<table id="resconfig_assignip_ipwalidtable" width="100px" cellspacing="0" cellpadding="0">\								</table>\							</div>\						</div>\					</div>';	},	updateHeight: function(){		$('#resconfig_d_data').height(this._opt.parent.height() - $('#resconfig_topdiv').height()-5);	}});peaxy.ResourceConfig.Edit = kendo.Class.extend({    //it should be {parent, container, serverId, serverName, height, resetObj, data, handler}	slidein:null,	selectedData:{},	_opt:{},	init: function(options){		this.setOption(options);		this.setSlidein(options);				var topDiv = $('<div id="resconfig_edit_topdiv"></div>');		var editDiv = this.slidein.getContainer();		var height = options.height?options.height:options.parent.height();		editDiv.css({'height':height,'width':356});		editDiv.append(topDiv);		topDiv.append(this.getTopPanel('resconfig_edit_toppanel',296,this.getTopPanelHtml()));		//topDiv.append('<HR class="p-hr-s"/>');		this.setTopDiv(options.serverName);				editDiv.append(this.getDataPanel());		//this.bindDataToTemplate(this.getEditData(options.serverName));		this.bindDataToTemplate(options.data);		var that = this;		editDiv.append(this.getBottomPanel('resconfig_edit_bottompanel',356,this.getBottomPanelHtml(296)));		options.parent.find('[id="resconfig_edit_close"]').off().bind('click',function(){that.onCloseClick();});		options.parent.find('[id="resconfig_edit_save"]').off().bind('click',function(){that.setBondList();});		//options.parent.find('[id="resconfig_edit_save"]').removeClass('cta-button');		this.updateHeight(height);			},	setOption:function(option){		$.extend(this._opt,option);	},	setSlidein:function(options){		var opt = {parent:options.parent,					container:options.container,					width:'356px',					height:options.height+'px',					location:'left',					hasTitle:false};		peaxy.ResourceConfig.Edit.prototype.slidein = new peaxy.Slidein(opt);	},	getTopPanel:function(id,width,html){		var hr = '<HR class="p-hr-l"/>';		var tPanel = $('<div style="margin:auto;"></div>');		tPanel.attr('id',id);		tPanel.css('width',width);		tPanel.append(html);		//tPanel.append(hr);		return tPanel;	},	setTopDiv:function(name){		this._opt.container.find('#resconfig_edit_serverid').text(name);	},	bindDataToTemplate:function(data){		var that=this;		var tb = this._opt.container.find('#resconfig_edit_tabledata');		tb.empty();		var r,d,name,rTemp=this.getDataTemplateHtml();		for(var i=0;i<data.length;i++){			r = $(rTemp);			tb.append(r);			d = data[i];			r.find('[name]').each(function(){				name = $(this).attr('name');				if(name=='check'){					$(this).off().bind('click',function(e){that.onCheckClick(e)});				}else if(name=='interfaceName'){					$(this).text(d[name]);				}else if(name=='speed'){					$(this).text(d[name]+'GB/s');				}			});			if(d.isActive){				r.find('[name="active"]').text('(Active)');									}else{				r.find('[name="active"]').text('(Inactive)')			}			r.find('[name="check"]').prop('checked',d.isBonded);			//this.bindCheckBoxEvents(r);		}	},	onCheckClick:function(e){		var that =this;		var checkObj = $(e.target);		var active = checkObj.parent().parent().find('[name="active"]').text();		if(active == '(Inactive)' && !checkObj.prop('checked')){			peaxy.tooltipDialog(checkObj,{				content:'This interface is inactive.Are you sure you want to bond it?',				actions:[					{name:'No',action:function(){checkObj.prop('checked',!checkObj.prop('checked'));}},				{name:'Yes',action:function(){						that.setSaveButtonStyle('save-button',false);						that.updateInterfaceList(checkObj.prop('checked'),checkObj.parent().parent());					}}				]			});		}else{			peaxy.ResourceConfig.Edit.prototype.setSaveButtonStyle('save-button',false);			peaxy.ResourceConfig.Edit.prototype.updateInterfaceList(checkObj.prop('checked'),checkObj.parent().parent());		}		e.stopPropagation();	},	updateInterfaceList:function(checked,parent){		var d,name=parent.find('[name="interfaceName"]').text();		for(var i=0;i<this._opt.data.length;i++){			if(name == this._opt.data[i].interfaceName){				this._opt.data[i].isBonded = checked;			}		}			},	getSelectedDataNameList:function(){		var names = [];		for(var i=0;i<this._opt.data.length;i++){			if(this._opt.data[i].isBonded){				names.push(this._opt.data[i].interfaceName);			}		}		return names;	},	setSaveButtonStyle:function(cssClass,disabled){		this._opt.parent.find('[id="resconfig_edit_save"]').attr('disabled',disabled);		var sClass = this._opt.parent.find('[id="resconfig_edit_save"]').attr('class');		if(cssClass != sClass){			this._opt.parent.find('[id="resconfig_edit_save"]').removeClass(sClass);			this._opt.parent.find('[id="resconfig_edit_save"]').addClass(cssClass);		}	},	getBottomPanel: function(id,width,html){		var bPanel = $('<div style="box-shadow:0 -4px 2px #A1A9AC;"></div>');		bPanel.attr('id',id);		bPanel.css('width',width);		bPanel.css('height',66);		//bPanel.css('line-height',66);		bPanel.append(html);		return bPanel;	},	show:function(){		this.slidein.show();	},	hide:function(){		this.slidein.hide();	},	onCloseClick:function(){		this.resetResourceConfigBackground();		this.hide();	},	onSaveClick:function(e){		peaxy.ResourceConfig.Edit.prototype.setBondList();		e.stopPropagation();	},	//	// call setBondList of API	//	setBondList:function(){		var that = this;		peaxy.BootstrapInterface.setBondList(this._opt.serverId, this.getSelectedDataNameList(),function(){			that.resetResourceConfig();			that.resetResourceConfigBackground();			that.hide();		});		},	resetResourceConfigBackground:function(){		this._opt.resetObj.removeClass('p-blue-repeater');	},	resetResourceConfig:function(){		this._opt.resetObj.find('[name="resconfig_default"]').text('custom');		var b = this.isBondedAll();		if(b){			this._opt.resetObj.find('[name="edit"]').removeClass('red-12');		}else{			this._opt.resetObj.find('[name="edit"]').removeClass('red-12');			this._opt.resetObj.find('[name="edit"]').addClass('red-12');					}		this._opt.handler(this._opt.serverId,this._opt.data,b);	},	isBondedAll:function(){		var c=0,l=this._opt.data.length;		this._opt.container.find('[name="check"]').each(function(){			if($(this).prop('checked')){c++;}		});		// for(var i=0;i<l;i++){			// if(this._opt.data[i].isBonded){				// c++;			// }		// }		if(c == l){return true;}else{return false;}	},	getTopPanelHtml: function() {		return '<div style="margin-top:20px;margin-bottom:5px;"><font class="normal-18">ETHERNET INTERFACE BONDING</font></div>\				<div style="margin-bottom:10px;"><font class="gray-14" style="margin-right:15px;">For Physical Server</font>\				<font id="resconfig_edit_serverid" class="black-14"></font></div>\				<HR class="p-hr-l" />\				<div style="margin-top:10px;margin-bottom:10px;"><font class="black-14" >SELECT INTERFACE TO BOND</font><br>\				<font id="resconfig_edit_number" class="black-14">15</font><font class="black-14"> Available</font><br></div>';	},	getTopPanelHtmlBack: function() {		return '<div style="margin-top:15px;margin-bottom:15px;"><font class="normal-18">ETHERNET INTERFACE BONDING</font></div>\				<font class="gray-14" style="margin-right:15px;">For Physical Server</font>\				<font id="resconfig_edit_serverid" class="black-14"></font>\				<HR class="p-hr-l" />\				<font class="black-14">SELECT INTERFACE SPEED</font><br>\				<font class="black-14">Choose the interface speed you</font><br>\				<font class="black-14">would like to use. Only interfaces of</font><br>\				<font class="black-14">the same speed can be bonded.</font><br>\				<select name="resconfig_edit_speed" style="margin-top:10px;margin-bottom:10px;">\				  <option value="10GB/s" style="width:150px;font-size:14px;">10GB/s</option>\				</select><br>\				<font class="black-14">SELECT INTERFACE TO BOND</font><br>\				<font id="resconfig_edit_number" class="black-14">15</font><font class="black-14"> Available</font><br>';	},	getBottomPanelHtml: function(width){		return '<table style="margin:auto;width:'+width+'px;"><tr>\		<td align="left"><button id="resconfig_edit_close" class="s-button" style="margin-top:15px;width:143px;height:24px;">CLOSE</button></td>\		<td align="right"><button id="resconfig_edit_save" class="cta-button" disabled="disabled" style="margin-top:15px;width:143px;height:24px;">SAVE CHANGES</button></td>\		</tr></table>';	},	getDataPanel: function(){		return '<div id="resconfig_edit_divdata" style="overflow-y:auto;overflow-x:hidden;">\				<table id="resconfig_edit_tabledata" cellspacing="0" cellspadding="0" style="margin:auto;border-top:2px solid #EEEEEE;"></table></div>';	},	getDataTemplateHtml: function(){		return '<tr><td><div>\				<table cellspacing="0" cellpadding="0" style="width:296px;margin:auto;margin-top:10px;margin-bottom:10px;">\					<tr name="1">\						<td style="display:none;" name="interfaceName"></td>\						<td width="20px"><input type="checkbox" name="check"/><label></label></td>\						<td class="lightblack-14" width="170px"><font name="speed"></font><font name="active"></font></td>\					</tr>\				</table>\				<HR style="border-top: 2px solid #EEEEEE;"/>\			</div></td></tr>';	},	updateHeight:function(height){		this._opt.container.find('[id="resconfig_edit_divdata"]').height(height - this._opt.container.find('[id="resconfig_edit_topdiv"]').height() - 																	this._opt.container.find('[id="resconfig_edit_bottompanel"]').height()-20);	},	clearHtml:function(){		this._opt.container.empty();	}});peaxy.ResourceConfig.Log = kendo.Class.extend({    //it should be {parent,container,serverID,serverName,data,height,resetObj,title}	slidein:null,	contentDiv:null,	resetObj:null,	init: function(options){		this.setSlidein(options);		this.contentDiv = options.container;		peaxy.ResourceConfig.Log.prototype.resetObj = options.resetObj;		var topDiv = $('<div id="resconfig_log_topdiv"></div>');		var logDiv = this.slidein.getContainer();		logDiv.css({'height':options.height});		logDiv.append(topDiv);		topDiv.append(this.getTopPanel('resconfig_log_toppanel',609,this.getTopPanelHtml()));		//topDiv.append('<HR class="p-hr-s"/>');		this.setTopDiv(options.serverName);		this.setLogTitle(topDiv,options.title);				logDiv.append(this.getDataPanel());		//this.bindDataToTemplate(this.getLogData(options.serverName));		this.bindDataToTemplate(options.data);				logDiv.append(this.getBottomPanel('resconfig_log_bottompanel',668,this.getBottomPanelHtml()));		this.contentDiv.find('[id="resconfig_log_close"]').off().bind('click',this.onCloseClick);				this.updateHeight(options.height);			},	setSlidein:function(options){		var opt = {parent:options.parent,					container:options.container,					width:'669px',					height:options.height+'px',					location:'left',					hasTitle:false};		peaxy.ResourceConfig.Log.prototype.slidein = new peaxy.Slidein(opt);	},	getTopPanel:function(id,width,html){		var tPanel = $('<div style="margin:auto;"></div>');		tPanel.attr('id',id);		tPanel.css('width',width);		tPanel.append(html);		return tPanel;	},	setTopDiv:function(id){		this.contentDiv.find('[id="resconfig_log_serverid"]').text(id);	},	setLogTitle:function(parent,title){		if('INSTALL FAILED' == title){			parent.find('#resconfig_log_faild').css('color','red');		}else{			parent.find('#resconfig_log_faild').css('color','#24303F');		}		parent.find('#resconfig_log_faild').text(title);	},	getLogData:function(id){		return [{time:'06:41:20',description:'lorem ipsum dolor sit amet,consectetur adipiscing elit,Nullam faucibus condimentum est et\		rhoncus. Donec eros metus, iaculis nec elementum eu, dapibus vitae augue.'},				{time:'06:41:20',description:'lorem ipsum dolor sit amet,consectetur adipiscing elit,Nullam faucibus condimentum est et\		rhoncus. Donec eros metus, iaculis nec elementum eu, dapibus vitae augue.'},				{time:'06:41:20',description:'lorem ipsum dolor sit amet,consectetur adipiscing elit,Nullam faucibus condimentum est et\		rhoncus. Donec eros metus, iaculis nec elementum eu, dapibus vitae augue.'},				{time:'06:41:20',description:'lorem ipsum dolor sit amet,consectetur adipiscing elit,Nullam faucibus condimentum est et\		rhoncus. Donec eros metus, iaculis nec elementum eu, dapibus vitae augue.'},				{time:'06:41:20',description:'lorem ipsum dolor sit amet,consectetur adipiscing elit,Nullam faucibus condimentum est et\		rhoncus. Donec eros metus, iaculis nec elementum eu, dapibus vitae augue.'},				{time:'06:41:20',description:'lorem ipsum dolor sit amet,consectetur adipiscing elit,Nullam faucibus condimentum est et\		rhoncus. Donec eros metus, iaculis nec elementum eu, dapibus vitae augue.'},				{time:'06:41:20',description:'lorem ipsum dolor sit amet,consectetur adipiscing elit,Nullam faucibus condimentum est et\		rhoncus. Donec eros metus, iaculis nec elementum eu, dapibus vitae augue.'},				{time:'06:41:20',description:'lorem ipsum dolor sit amet,consectetur adipiscing elit,Nullam faucibus condimentum est et\		rhoncus. Donec eros metus, iaculis nec elementum eu, dapibus vitae augue.'},				{time:'06:41:20',description:'lorem ipsum dolor sit amet,consectetur adipiscing elit,Nullam faucibus condimentum est et\		rhoncus. Donec eros metus, iaculis nec elementum eu, dapibus vitae augue.'},		{time:'06:41:20',description:'lorem ipsum dolor sit amet,consectetur adipiscing elit,Nullam faucibus condimentum est et\		rhoncus. Donec eros metus, iaculis nec elementum eu, dapibus vitae augue.'},		{time:'06:41:20',description:'lorem ipsum dolor sit amet,consectetur adipiscing elit,Nullam faucibus condimentum est et\		rhoncus. Donec eros metus, iaculis nec elementum eu, dapibus vitae augue.'},		{time:'06:41:20',description:'lorem ipsum dolor sit amet,consectetur adipiscing elit,Nullam faucibus condimentum est et\		rhoncus. Donec eros metus, iaculis nec elementum eu, dapibus vitae augue.'},		{time:'06:41:20',description:'lorem ipsum dolor sit amet,consectetur adipiscing elit,Nullam faucibus condimentum est et\		rhoncus. Donec eros metus, iaculis nec elementum eu, dapibus vitae augue.'},		{time:'06:41:20',description:'lorem ipsum dolor sit amet,consectetur adipiscing elit,Nullam faucibus condimentum est et\		rhoncus. Donec eros metus, iaculis nec elementum eu, dapibus vitae augue.'},		{time:'06:41:20',description:'lorem ipsum dolor sit amet,consectetur adipiscing elit,Nullam faucibus condimentum est et\		rhoncus. Donec eros metus, iaculis nec elementum eu, dapibus vitae augue.'},				{time:'06:41:20',description:'lorem ipsum dolor sit amet,consectetur adipiscing elit,Nullam faucibus condimentum est et\		rhoncus. Donec eros metus, iaculis nec elementum eu, dapibus vitae augue.'}				];	},	bindDataToTemplate: function(data){		var tb = $('#resconfig_log_tabledata');		var r,d,name,rTemp=this.getDataTemplateHtml();		for(var i=0;i<data.length;i++){			d = data[i];						// r.find('[name]').each(function(){ 				// $(this).text(d[$(this).attr('name')]);			// });			if(d && 0 < d.trim().length){				r = $(rTemp);				tb.append(r);								r.find('[name="description"]').text(d);			}					}	},	resetViewLogRowBackground:function(){		this.resetObj.removeClass('p-blue-repeater');	},	getBottomPanel: function(id,width,html){		var bPanel = $('<div style="box-shadow:0 -5px 3px #A1A9AC; background-color:#DADDDE;"></div>');		bPanel.attr('id',id);		bPanel.css('width',width);		bPanel.css('height',66);		bPanel.append(html);		return bPanel;	},	show:function(){		this.slidein.show();	},	hide:function(){		this.slidein.hide();	},	onCloseClick:function(){		peaxy.ResourceConfig.Log.prototype.resetViewLogRowBackground();		peaxy.ResourceConfig.Log.prototype.hide();	},	getTopPanelHtml: function() {		return '<div style="margin-top:15px;margin-bottom:4px;"><font class="normal-18">LOG: </font>\				<font id="resconfig_log_faild" style="color:red;" class="normal-18">INSTALL FAILD</font>\				<span id="resconfig_viewlog_help" class="help" data-help-url="" style="float:right;cursor:pointer;width:20px;"></span></div>\				<div style="margin-bottom:6px;"><font style="margin-right:15px;" class="black-14">For Physical Server</font>\				<font id="resconfig_log_serverid" class="black-14"></font></div>\				<HR class="p-hr-l" />\				<div style="margin-top:6px;margin-bottom:6px;">\				<font class="black-14">After the issue id addressed you will need to reboot the mathine from the drive again. The</font><br>\				<font class="black-14">installation can be attempted when additional resources are added later. It is not necessary to</font><br>\				<font class="black-14">complete current process.</font><br></div>';	},	getBottomPanelHtml: function(){		return '<div style="width:609px;margin:auto;">\		<button id="resconfig_log_close" class="s-button" style="width:120px;margin-top:15px;float:right;">CLOSE</button>';	},	getDataPanel: function(){		return '<div id="resconfig_log_divdata" style="overflow-y:auto;overflow-x:hidden;">\				<table id="resconfig_log_tabledata" cellspacing="0" cellspadding="0" style="border-top:solid 2px #EEEEEE;"></table></div>';	},	getDataTemplateHtml: function(){		return '<tr><td><div style="width:668px;border-bottom:solid 2px #EEEEEE;">\				<table cellspacing="0" cellpadding="0" style="width:609px;margin:auto;margin-top:9px;margin-bottom:10px;">\					<tr>\						<td class="black-14" name="description"></td>\					</tr>\				</table>\			</div></td></tr>';	},	updateHeight:function(height){		this.contentDiv.find('[id="resconfig_log_divdata"]').height(height - this.contentDiv.find('[id="resconfig_log_topdiv"]').height() - this.contentDiv.find('[id="resconfig_log_bottompanel"]').height()-15);	},	clearHtml:function(){		this.contentDiv.empty();	}});peaxy.ResourceConfig.Install = kendo.Class.extend({	_opt:{parent:null,pageSize:20,ipAssignments:null,selectedNames:null},	page:1,	pageNumber:1,	resConfigLog:null,	serverId:'',	progressTimer:null,	status:'os',	init:function(options){		$.extend(this._opt,options);		if(options.parent){			var parent = options.parent;			//it will be also used by view log page.it must be first element.			parent.find('[id="resconfig_slidein"]').empty();			resconfigDiv = $('<div id="resconfig_install_div"></div>');			parent.append(resconfigDiv);			resconfigDiv.width(parent.width());			resconfigDiv.height(parent.height());						var width = 964;			var topDiv = $('<div id="resconfig_install_topdiv"></div>');			resconfigDiv.append(topDiv);			topDiv.append(this.getTopPanel("resconfig_install_toppanel",width,this.getInstallTopPanelHtml()));			topDiv.append(this.getInstallSummaryBarHtml(width));			topDiv.append(this.getInstallGridHeadHtml(width));						// if(options.data && 0<options.data.length){				//this.setInstallPageNumber(options.data.length);				this.setPageNumber(this._opt.ipAssignments.ipList.length);				resconfigDiv.append(this.getDataPanel());				//this.bindDataToTemplate(options.data,options.parent.width(),width);				var that = this;				peaxy.Communication.getScript('js/peaxy.progressbar.js',function(){					that.bindDataToTemplate(that._opt.ipAssignments.ipList,that._opt.parent.width(),width);				});				//this.bindDataToTemplate(this._opt.ipAssignments.ipList,this._opt.parent.width(),width);				// //parent.append(this.getBottonPanel("resconfig_bottonpanel",1024,this.getBottonPanelHtml()));				this.updateHeight();				// //				// this.setTopPanel(false);			// }				//this.startProgress();			//this.getSelectedIdList();		}	},	getTopPanel:function(id,width,html){		var hr = '<HR color="#24303F" SIZE="3">';		var tPanel = $('<div style="margin:auto;"></div>');		tPanel.attr('id',id);		tPanel.css('width',width);		tPanel.append(html);		//tPanel.append(hr);		return tPanel;	},	getInstallTopPanelHtml: function() {		return '<table cellspacing="0" cellpadding="0" width="100%" style="padding-top:20px;padding-bottom:10px;">\					<tr height="30px">\						<td align="left" width="50%"><font class="gray-18">ADD RESOURCES: </font>\						<font id="install_process" class="normal-18">INSTALL IN PROGRESS</font></td>\					</tr>\				</table><HR class="p-hr-l" />';	},	setPageNumber: function(dataLength){		this.pageNumber = Math.ceil(dataLength / this._opt.pageSize);	},	getEndPageNumber: function(dataLength){		if (this.page == this.pageNumber){			return dataLength;		}else {			return this.page * this._opt.pageSize;		}	},	setStatus:function(s){		this.status = s;	},	startProgress:function(){		if('os'==this.status){			peaxy.ResourceConfig.Install.prototype.progressTimer = setInterval(this.getOsInstallProgress,5000);		}else if('vm'==this.status){			this.setInstallProcessTitle('INSTALLING PVM INSTANCES');			this.summaryClear();			this.dataTableClear();			this.bindDataToTemplate(this._opt.ipAssignments.ipList,this._opt.parent.width(),964);			peaxy.ResourceConfig.Install.prototype.progressTimer = setInterval(this.getVmInstallProgress,5000);		}else if('hf'==this.status){			//this.setInstallProcessTitle('INSTALLING HYPERFILER');			this.summaryClear();			this.dataTableClear();			this.bindDataToTemplate(this._opt.ipAssignments.ipList,this._opt.parent.width(),964);			peaxy.ResourceConfig.Install.prototype.progressTimer = setInterval(this.getHfInstallProgress,5000);		}	},	progressTimerClear:function(){		clearInterval(this.progressTimer);	},	getOsInstallProgress: function(){		peaxy.BootstrapInterface.getOsInstallProgress(function(ProgressList){			peaxy.ResourceConfig.Install.prototype.updateOsInstallProgress(ProgressList);		});		// var ProgressList = [{id:1,progress:{percentComplete:100,status:'SUCCESSFUL'}},		// {id:2,progress:{percentComplete:10,status:'FAILED'}}];		// peaxy.ResourceConfig.Install.prototype.updateOsInstallProgress(ProgressList);	},	updateOsInstallProgress:function(ProgressList){		var d,p,pb,failedCount=0,completedCount=0,listCount=this._opt.ipAssignments.ipList.length,end=true;		for(var i=0;i<ProgressList.length;i++){			d=ProgressList[i];			this._opt.parent.find('[id="resconfig_install_div"]').find('[name="id"]').each(function(){				if(d.id==$(this).text()){					p =$(this).parent().find('[name="process_percent"]');					p.empty();					if('FAILED' == d.progress.status || 'TIMED_OUT' == d.progress.status){						failedCount++;						//peaxy.ResourceConfig.Install.prototype.updateOsFailedSummary(failedCount);						peaxy.ResourceConfig.Install.prototype.setInstallFailedSummary(failedCount);						$(this).parent().find('[name="progress"]').empty();						$(this).parent().find('[name="progress"]').append('<font style="color:red;">Install Failed: View Log to learn more.</font>');					}else{						if(100 == d.progress.percent){							completedCount++;							//peaxy.ResourceConfig.Install.prototype.updateOsCompletedSummary(d.id);							peaxy.ResourceConfig.Install.prototype.setInstallCompletedSummary(completedCount);							$(this).parent().find('[name="progress"]').empty();							$(this).parent().find('[name="progress"]').append('<font>Install completed successfully.</font>');						}else{							end=false;							peaxy.ResourceConfig.Install.prototype.setProcessBar(p,d.progress.percent);						}											}				}			});		}		listCount = listCount - completedCount - failedCount;		this.setInstallInProgressSummary(listCount)		if(end){			peaxy.ResourceConfig.Install.prototype.initPopupMsg();			this.setInstallProcessTitle('REBOOT SERVERS');			this.progressTimerClear();			peaxy.ResourceConfig.prototype.setOnChangeHandler(end);		}	},	initPopupMsg:function(){		peaxy.popupMsg("Please remove USB sticks and reboot servers to proceed.",{			parent:this._opt.parent,			autoHide:true,			delay:10000,			location:'down'		});	},	getVmInstallProgress:function(){		// var ProgressList = [{id:1,progress:{percentComplete:90,installsPending:2,installsStarted:1,installsCompleted:1,installsFailed:0}},		// {id:2,progress:{percentComplete:10,installsPending:0,installsStarted:0,installsCompleted:0,installsFailed:0}}];		peaxy.BootstrapInterface.getVmInstallProgress(peaxy.ResourceConfig.Install.prototype.getSelectedIdList(),function(ProgressList){			peaxy.ResourceConfig.Install.prototype.updateVmInstallProgress(ProgressList);		});	},	updateVmInstallProgress:function(ProgressList){		var d,p,pb,failedCount=0,completedCount=0,listCount=this._opt.ipAssignments.ipList.length,end=true;		var vm;		for(var i=0;i<ProgressList.length;i++){			d=ProgressList[i];			this._opt.parent.find('[id="resconfig_install_div"]').find('[name="id"]').each(function(){				if(d.id==$(this).text()){					p =$(this).parent().find('[name="process_percent"]');					p.empty();					$(this).parent().find('[name="progress"]').empty();					$(this).parent().find('[name="vm_status"]').remove();						if(0 < d.progress.installsFailed){						failedCount++;						peaxy.ResourceConfig.Install.prototype.setInstallFailedSummary(failedCount);						peaxy.ResourceConfig.Install.prototype.setLineHeightStyle($(this).parent().find('[name="progress"]').parent(),true);						$(this).parent().find('[name="progress"]').append('<font style="color:red;">Install Failed: View Log to learn more.</font>');					}else if(100 == d.progress.percentComplete){						completedCount++;						peaxy.ResourceConfig.Install.prototype.setInstallCompletedSummary(completedCount);						peaxy.ResourceConfig.Install.prototype.setLineHeightStyle($(this).parent().find('[name="progress"]').parent(),true);						$(this).parent().find('[name="progress"]').append('<font>Install completed successfully</font>');					}else{						end=false;						if(0 < d.progress.installsStarted ||							0 < d.progress.installsCompleted ||							0 < d.progress.installsPending){							peaxy.ResourceConfig.Install.prototype.setLineHeightStyle($(this).parent().find('[name="progress"]').parent(),false);							$(this).parent().find('[name="progress"]').append('PVM installation in progress<br>');							$(this).parent().find('[name="progress"]').append(d.progress.installsStarted+' active | '+																				d.progress.installsCompleted+' complete | '+																				d.progress.installsPending+' pending');						}else if(0==d.progress.percentComplete){							$(this).parent().find('[name="progress"]').append('<font>Server rebooting</font>');						}else{							$(this).parent().find('[name="progress"]').append('<font>Configuring Peaxy software</font>');										}						peaxy.ResourceConfig.Install.prototype.setProcessBar(p,d.progress.percentComplete);									}										}			});		}		listCount = listCount - completedCount - failedCount;		this.setInstallInProgressSummary(listCount)		if(end){			this.setInstallProcessTitle('RESOURCES AVAILABLE');			this.progressTimerClear();			peaxy.ResourceConfig.prototype.setOnChangeHandler(end);					}	},	getHfInstallProgress:function(){		peaxy.BootstrapInterface.getInitHfProgress(function(ProgressList){			peaxy.ResourceConfig.Install.prototype.updateHfInstallProgress(ProgressList);		});	},	updateHfInstallProgress:function(ProgressList){		var d,p,pb,failedCount=0,completedCount=0,listCount=this._opt.ipAssignments.ipList.length,end=true;		for(var i=0;i<ProgressList.length;i++){			d=ProgressList[i];			this._opt.parent.find('[id="resconfig_install_div"]').find('[name="id"]').each(function(){				if(d.id==$(this).text()){					p =$(this).parent().find('[name="process_percent"]');					p.empty();					if('FAILED' == d.progress.status || 'TIMED_OUT' == d.progress.status){						failedCount++;						//peaxy.ResourceConfig.Install.prototype.updateOsFailedSummary(failedCount);						peaxy.ResourceConfig.Install.prototype.setInstallFailedSummary(failedCount);						$(this).parent().find('[name="progress"]').empty();						$(this).parent().find('[name="progress"]').append('<font style="color:red;">Install Failed: View Log to learn more.</font>');					}else{						if(100 == d.progress.percentComplete){							completedCount++;							//peaxy.ResourceConfig.Install.prototype.updateOsCompletedSummary(d.id);							peaxy.ResourceConfig.Install.prototype.setInstallCompletedSummary(completedCount);							$(this).parent().find('[name="progress"]').empty();							$(this).parent().find('[name="progress"]').append('<font>Install completed successfully.</font>');						}else{							end=false;							peaxy.ResourceConfig.Install.prototype.setProcessBar(p,d.progress.percentComplete);						}					}				}			});		}		listCount = listCount - completedCount - failedCount;		this.setInstallInProgressSummary(listCount)		if(end){			//this.setInstallProcessTitle('REBOOT SERVERS');			this.progressTimerClear();			peaxy.ResourceConfig.prototype.setOnChangeHandler(end);		}	},	idListClear:function(){		this.idList.splice(0,this.idList.length);  	},	dataTableClear:function(){		this._opt.parent.find('[id="resconfig_install_div"]').find('[id="resconfig_install_datatable"]').empty();	},	getSelectedIdList:function(){		var idList = [];		for(var i=0;i<this._opt.ipAssignments.ipList.length;i++){			idList.push(this._opt.ipAssignments.ipList[i].id);		}		return idList;	},	setLineHeightStyle:function(element,isAdd){		if(element.attr('class') && !isAdd){			element.removeClass('gridLineHeight');			element.css('height',30);			element.css('margin-top',5);		}else if(!element.attr('class') && isAdd){			element.css('margin-top',0);			element.css('height',35);			element.addClass('gridLineHeight');		}	},	setInstallProcessTitle:function(t){		this._opt.parent.find('[id="resconfig_install_div"]').find('[id="install_process"]').text(t);	},	updateOsFailedSummary:function(failedCount){		failedCount = failedCount + parseInt(this._opt.parent.find('[id="resconfig_install_div"]').find('[id="resconfig_install_faildnum"]').text());		this.setInstallFailedSummary(failedCount);	},	updateOsCompletedSummary:function(id){		this.idList.push(id);		this.setInstallCompletedSummary(this.idList.length);	},	bindDataToTemplate: function(data,pWidth,width){		var tb = this._opt.parent.find('[id="resconfig_install_div"]').find('[id="resconfig_install_datatable"]');		var r,type,d,name,num=this.getEndPageNumber(data.length),p=(this.page-1) * this._opt.pageSize;		var beacon=false;		for(var i=0;i<data.length;i++){			r = $(this.getDataTemplateHtml(pWidth,width));			tb.append(r);			d = data[i];			beacon = peaxy.ResourceConfig.prototype.getBeaconById(d.id);			this.setProgressInitStatus(r.find('[name="progress"]'));			this.setProcessBar(r.find('[name="process_percent"]'),0);			r.find('[name]').each(function(){				name = $(this).attr('name');								if(name=='beacon'){					$(this).kendoPeaxySwitch();					$(this).prop('checked',beacon);					$(this).off().bind('click',peaxy.ResourceConfig.Install.prototype.onBeaconClick);				}else if(name=='log'){					$(this).off().bind('click',peaxy.ResourceConfig.Install.prototype.onViewLogClick);				}else if(name=='ip'){					$(this).text(d[name]);				}else if(name=='id'){					r.find('[name="name"]').text(peaxy.ResourceConfig.Install.prototype.getServerNameById(d[name]));					$(this).text(d[name]);				}			});		}		this._opt.parent.find('[id="resconfig_install_datadiv"]').off().bind('scroll',this.onDataDivScroll);	},	clearDataTable:function(){		this._opt.parent.find('[id="resconfig_install_div"]').find('[id="resconfig_install_datatable"]').empty();	},	setInstallErrorMessage:function(msgs){		var id;		for(var i=0;i<msgs.length;i++){			id = msgs[i].id;			this._opt.parent.find('[id="resconfig_install_div"]').find('[name="id"]').each(function(){				if(id==$(this).text()){					$(this).parent().find('[name="process_percent"]').empty();					$(this).parent().find('[name="progress"]').empty();					$(this).parent().find('[name="progress"]').append(msgs[i].message);				}			});		}	},	onDataDivScroll:function(){		if($(this).get(0).scrollHeight <= ($(this).get(0).scrollTop+$(this).height())){			peaxy.ResourceConfig.prototype.bindScrollData();		}		if(0 == $(this).get(0).scrollTop){			$(this).removeClass('gridScrollShadow');		}else{			$(this).addClass('gridScrollShadow');		}	},	setProcessBar:function(parent,percent){		var pb,w;		if('os'==this.status){			w = '400px';		}else if('vm'==this.status){			w = '300px';		}else if('hf'==this.status){			w = '300px';		}		var pb = new peaxy.ProgressBar({parent:parent,width:w});		pb.setProgress(percent);	},	setProgressInitStatus:function(element){		if('vm'==this.status){			element.text('Server rebooting');		}else if('hf'==this.status){			element.text('Configuring Peaxy software');		}	},	getServerNameById:function(id){		return this._opt.selectedNames[id];	},	cancelInstalls:function(){		var that = this;		if('os'==this.status){			peaxy.BootstrapInterface.cancelOsInstalls(function(){				peaxy.ResourceConfig.Install.prototype.progressTimerClear();				that.clearDataTable();				that.bindDataToTemplate(that._opt.ipAssignments.ipList,that._opt.parent.width(),964);			});		}else if('vm'==this.status){			peaxy.BootstrapInterface.cancelVmInstalls(function(){				peaxy.ResourceConfig.Install.prototype.progressTimerClear();				that.clearDataTable();				that.bindDataToTemplate(that._opt.ipAssignments.ipList,that._opt.parent.width(),964);			});		}else if('hf'==this.status){			peaxy.BootstrapInterface.terminateBootstrap(function(){				peaxy.ResourceConfig.Install.prototype.progressTimerClear();				that.clearDataTable();				//that.bindDataToTemplate(that._opt.ipAssignments.ipList,that._opt.parent.width(),964);			});		}	},	onViewLogClick:function(e){		var serverId =$(this).parent().parent().find('[name="id"]').text();		var serverName = $(this).parent().parent().find('[name="name"]').text();		// peaxy.BootstrapInterface.getVmInstallLog(serverId,function(logList){			//peaxy.ResourceConfig.Install.prototype.viewLog(serverName,logList);		// });		var title = $(this).parent().parent().find('[name="progress"]').text();		if(/^Install Failed/.test(title)){			title = 'INSTALL FAILED';		}else if(/^Install completed/.test(title)){			title = 'INSTALL COMPLETE';		}else{			title = 'INSTALL IN PROGRESS';		}		resetObj = $(this).parent().parent().parent().parent().parent();		peaxy.Communication.getScript('js/peaxy.slidein.js',function(){			resetObj.addClass('p-blue-repeater');			peaxy.ResourceConfig.Install.prototype.getLogInfo(serverId,serverName,resetObj,title);		});		e.stopPropagation();	},	getLogInfo:function(serverId,serverName,resetObj,title){		// var logList;		if('os'==this.status){			peaxy.BootstrapInterface.getOsInstallLog(serverId,function(logList){				peaxy.ResourceConfig.Install.prototype.viewLog(serverId,serverName,logList,resetObj,title);			});		}else if('vm'==this.status){			peaxy.BootstrapInterface.getVmInstallLog(serverId,function(logList){				peaxy.ResourceConfig.Install.prototype.viewLog(serverId,serverName,logList,resetObj,title);			});		}else if('hf'==this.status){			peaxy.BootstrapInterface.getInitHfLog(serverId,function(logList){				peaxy.ResourceConfig.Install.prototype.viewLog(serverId,serverName,logList,resetObj,title);			});		}	},	viewLog:function(serverId,serverName,logList,resetObj,title){	//parent,container,serverName,data,height		var opt = {parent:this._opt.parent,				   container:this._opt.parent.find('[id="resconfig_slidein"]'),				   serverName:serverName,				   data:logList,				   resetObj:resetObj,				   height:this._opt.parent.height(),				   title:title					};		if(this.resConfigLog){			if(serverId != this.serverId){				this.resConfigLog.resetViewLogRowBackground();				this.resConfigLog.clearHtml();				this.resConfigLog = new peaxy.ResourceConfig.Log(opt);			}		}else{			this.resConfigLog = new peaxy.ResourceConfig.Log(opt);		}		this.serverId = serverId;		this.resConfigLog.show();	},	onBeaconClick:function(e){		var id = $(this).parent().parent().parent().parent().find('[name="id"]').text();		peaxy.BootstrapInterface.setBeacon(id,this.checked,function(){			peaxy.ResourceConfig.prototype.setBeaconById(id,this.checked);		});			e.stopPropagation();	},	summaryClear:function(){		this._opt.parent.find('[id="resconfig_install_div"]').find('[id="resconfig_install_inprogressnum"]').text('0');		this._opt.parent.find('[id="resconfig_install_div"]').find('[id="resconfig_install_configuringnum"]').text('0');		this._opt.parent.find('[id="resconfig_install_div"]').find('[id="resconfig_install_faildnum"]').text('0');	},	setInstallInProgressSummary:function(num){		this._opt.parent.find('[id="resconfig_install_div"]').find('[id="resconfig_install_inprogressnum"]').text(num);	},	setInstallCompletedSummary:function(num){		this._opt.parent.find('[id="resconfig_install_div"]').find('[id="resconfig_install_configuringnum"]').text(num);	},	setInstallFailedSummary:function(num){		this._opt.parent.find('[id="resconfig_install_div"]').find('[id="resconfig_install_faildnum"]').text(num);	},	getInstallSummaryBarHtml: function(width){		return '<div class="gray-14" style="margin:auto;width:'+width+'px;margin-top:10px;">\					<font>IN PROGRESS </font><font class="normal-14" id="resconfig_install_inprogressnum">0</font>\					<font style="margin-left:15px;">FAILD </font><font class="normal-14" id="resconfig_install_faildnum">0</font>\					<font style="margin-left:15px;">COMPLETE </font><font class="normal-14" id="resconfig_install_configuringnum">0</font>\</div>'	},	getInstallGridHeadHtml: function(width){		return '<div id="resconfig_gridhead" style="margin:auto;margin-top:15px;" class="gray-14">\				<table cellspacing="0" cellpadding="0" style="width:'+width+'px;margin:auto;margin-bottom:5px;">\					<tr>\						<td width="130px"><font>SERVER NAME</font></td>\						<td width="120px"><font>IP ADDRESS</font></td>\						<td><font>PROGRESS/STATUS</font></td>\						<td width="100px"><font>LOGS</font></td>\						<td width="69px"><font>BEACON</font></td>\					</tr>\				</table>\				\			</div>';	},	getDataPanel: function(){		return '<div id="resconfig_install_datadiv" style="overflow-y:auto;overflow-x:hidden;border-top:solid 1px #515557;">\		<table id="resconfig_install_datatable" cellspacing="0" cellspadding="0"></table></div>';	},	getDataTemplateHtml: function(pWidth,width){		return '<tr name="install_template"><td><div style="width:'+pWidth+'px;border-bottom:solid 1px #A1A9AC;height:38px;">\					<table cellspacing="0" cellpadding="0" style="width:'+width+'px;margin:auto;margin-top:0px;margin-bottom:2px;">\						<tr class="black-12">\							<td name="id" style="display:none;"></td>\							<td width="130px" name="name"></td>\							<td width="120px" name="ip"></td>\							<td>\								<div style="float:left;" class="gridLineHeight">\									<font name="progress">In Progress</font></div>\								<div name="process_percent" style="float:right;margin-right:20px;margin-top:6px;"></div>\							</td>\							<td width="100px" class="underline-12">\								<u name="log" style="cursor:pointer">View Log</u>\							</td>\							<td width="70px"><input name="beacon" type="checkbox"/></td>\						</tr>\					</table>\				</div></td></tr>';	},	updateHeight: function(){		this._opt.parent.find('[id="resconfig_install_datadiv"]').height(this._opt.parent.height() - this._opt.parent.find('[id="resconfig_install_topdiv"]').height()-5);	}});